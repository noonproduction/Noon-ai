<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Noon AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background: #0f0f1a; color: white; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .user-msg { background: #2563eb; align-self: flex-end; border-radius: 18px 18px 0 18px; color: white; }
        .bot-msg { background: rgba(255, 255, 255, 0.1); align-self: flex-start; border-radius: 18px 18px 18px 0; color: #e5e7eb; }
    </style>
</head>
<body>

    <div class="glass p-4 flex items-center gap-3">
        <h1 class="font-bold text-lg text-cyan-400">Noon AI</h1>
    </div>

    <div id="chat-box" class="flex-1 overflow-y-auto p-4 space-y-4 flex flex-col">
        <div class="bot-msg p-3 max-w-[85%]">Hello! I am Noon AI. Ask me anything!</div>
    </div>

    <div class="p-4 glass">
        <form id="chat-form" class="flex gap-2" onsubmit="sendMessage(event)">
            <input type="text" id="msg-input" class="w-full bg-gray-800 rounded-full px-4 py-3 outline-none text-white" placeholder="Message..." autocomplete="off">
            <button type="submit" class="w-12 h-12 bg-cyan-600 rounded-full text-white"><i class="fas fa-paper-plane"></i></button>
        </form>
    </div>

    <script>
        // ðŸ”¥ Updated Link Added Here!
        const BACKEND_URL = "https://879a9d65-a264-4177-9167-2711221fa0f5-00-3j9ytr2tbdy5b.sisko.replit.dev/chat"; 

        async function sendMessage(e) {
            e.preventDefault();
            const input = document.getElementById('msg-input');
            const text = input.value.trim();
            if (!text) return;

            addMessage(text, 'user');
            input.value = '';

            const loading = document.createElement('div');
            loading.className = 'bot-msg p-3 text-gray-400';
            loading.innerText = 'Thinking...';
            document.getElementById('chat-box').appendChild(loading);

            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: text })
                });
                const data = await response.json();
                loading.remove();
                addMessage(data.reply, 'bot');
            } catch (error) {
                loading.remove();
                addMessage("Connection Error: Replit might be sleeping. Wake it up!", 'bot');
            }
        }

        function addMessage(text, sender) {
            const box = document.getElementById('chat-box');
            const div = document.createElement('div');
            div.className = sender === 'user' ? 'user-msg p-3 max-w-[85%]' : 'bot-msg p-3 max-w-[85%]';
            div.innerHTML = text.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>').replace(/\n/g, '<br>');
            box.appendChild(div);
            box.scrollTop = box.scrollHeight;
        }
    </script>
</body>
</html>
